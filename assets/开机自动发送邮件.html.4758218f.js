import{_ as a}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as e,c as t,b as n,d as i,e as o,f as p,r as c}from"./app.04852270.js";const l={},r=p(`<h1 id="vnc\u5F00\u673A\u81EA\u52A8\u6267\u884Cpython\u811A\u672C\u53D1\u9001\u672C\u673Aip\u5730\u5740\u5230\u6307\u5B9A\u90AE\u7BB1" tabindex="-1"><a class="header-anchor" href="#vnc\u5F00\u673A\u81EA\u52A8\u6267\u884Cpython\u811A\u672C\u53D1\u9001\u672C\u673Aip\u5730\u5740\u5230\u6307\u5B9A\u90AE\u7BB1" aria-hidden="true">#</a> VNC\u5F00\u673A\u81EA\u52A8\u6267\u884Cpython\u811A\u672C\u53D1\u9001\u672C\u673Aip\u5730\u5740\u5230\u6307\u5B9A\u90AE\u7BB1</h1><h2 id="\u4E00\u3001\u80CC\u666F" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001\u80CC\u666F" aria-hidden="true">#</a> \u4E00\u3001\u80CC\u666F</h2><h3 id="\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#\u95EE\u9898" aria-hidden="true">#</a> \u95EE\u9898\uFF1A</h3><p>\u5DE5\u4F5C\u4E2D\u4E3B\u529B\u673A\u7528MacBook\uFF0C\u5E73\u5E38\u6709\u4E9B\u5DE5\u5177\u9700\u8981\u7528Ubuntu\uFF08\u6BD4\u5982MTK\u88C5\u673A\u8F6F\u4EF6\uFF09\u3002 MacBook\u5207\u6362\u5230Ubuntu\u4E3B\u673A\u7684\u65F6\u5019\u6BCF\u6B21\u90FD\u9700\u8981\u5C06\u663E\u793A\u5668\u4ECEMacBook\u8FDE\u63A5\u5230Ubuntu\u4E3B\u673A\u4E0A\uFF0C\u6BD4\u8F83\u9EBB\u70E6\u3002</p><h3 id="\u89E3\u51B3\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u89E3\u51B3\u65B9\u6CD5" aria-hidden="true">#</a> \u89E3\u51B3\u65B9\u6CD5\uFF1A</h3><p>Ubuntu\u6BCF\u6B21\u5F00\u673A\u90FD\u53D1\u9001ip\u5730\u5740\u5230\u6307\u5B9A\u90AE\u7BB1\uFF0C\u7136\u540E\u5728MacBook\u4E0A\u7528vnc\u901A\u8FC7ip\u8FDC\u7A0B\u8FDE\u63A5Ubuntu\uFF08Ubuntu\u4E3B\u673A\u63A5\u4E86\u4E2AHDMI\u6B3A\u9A97\u5668\uFF0C\u8FD9\u6837\u8FDC\u7A0B\u8FDE\u63A5\u7684\u65F6\u5019\u624D\u80FD\u663E\u793A\u684C\u9762\uFF09</p><h2 id="\u4E8C\u3001\u811A\u672C\u53CA\u5F00\u673A\u81EA\u52A8\u6267\u884C" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001\u811A\u672C\u53CA\u5F00\u673A\u81EA\u52A8\u6267\u884C" aria-hidden="true">#</a> \u4E8C\u3001\u811A\u672C\u53CA\u5F00\u673A\u81EA\u52A8\u6267\u884C</h2><h3 id="_1-\u5B89\u88C5ifconfig" tabindex="-1"><a class="header-anchor" href="#_1-\u5B89\u88C5ifconfig" aria-hidden="true">#</a> 1. \u5B89\u88C5ifconfig</h3><p>\u83B7\u53D6ip\u5730\u5740\u7528\u5230<code>ifconfig</code>\u8FD9\u4E2A\u547D\u4EE4\uFF0C\u5148\u5728\u7EC8\u7AEF\u8BD5\u4E00\u4E0B\u6709\u6CA1\u6709\u5B89\u88C5\uFF0C\u6CA1\u88C5\u7684\u8BDD\u5148\u6267\u884C\u4E0B\u9762\u547D\u4EE4\u5B89\u88C5\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> net-tools
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2-\u7F16\u5199\u53D1\u9001\u90AE\u4EF6\u811A\u672C" tabindex="-1"><a class="header-anchor" href="#_2-\u7F16\u5199\u53D1\u9001\u90AE\u4EF6\u811A\u672C" aria-hidden="true">#</a> 2. \u7F16\u5199\u53D1\u9001\u90AE\u4EF6\u811A\u672C</h3><p>\u8FD9\u91CC\u7528python\u5B9E\u73B0<code>send_email_when_power_on.py</code></p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token comment">#!/usr/bin/python</span>
<span class="token comment"># -*- coding: UTF-8 -*-</span>

<span class="token keyword">import</span> os
<span class="token keyword">from</span> email<span class="token punctuation">.</span>mime<span class="token punctuation">.</span>text <span class="token keyword">import</span> MIMEText
<span class="token keyword">import</span> smtplib
<span class="token keyword">from</span> email<span class="token punctuation">.</span>header <span class="token keyword">import</span> Header
<span class="token keyword">import</span> time


<span class="token comment"># check network availability </span>
TIMEOUT<span class="token operator">=</span><span class="token number">5</span>

<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
  SITE_TO_CHECK<span class="token operator">=</span><span class="token string">&quot;www.baidu.com&quot;</span>
  RET_CODE<span class="token operator">=</span><span class="token string">&#39;curl -I -s --connect-timeout $TIMEOUT $SITE_TO_CHECK -w %{http_code} | tail -n1&#39;</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;x$RET_CODE&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;x200&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">&quot;Network OK, will send mail...&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">break</span>
  <span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">&quot;Network not ready, wait...&quot;</span><span class="token punctuation">)</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>


<span class="token comment">#call ifconfig</span>
cmd<span class="token operator">=</span><span class="token string">&#39;ifconfig&#39;</span>
m<span class="token operator">=</span>os<span class="token punctuation">.</span>popen<span class="token punctuation">(</span>cmd<span class="token punctuation">)</span>
t<span class="token operator">=</span>m<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#send result of ifconfigi</span>
m<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
msg<span class="token operator">=</span>MIMEText<span class="token punctuation">(</span>t<span class="token punctuation">,</span><span class="token string">&#39;plain&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;utf-8&#39;</span><span class="token punctuation">)</span>
msg<span class="token punctuation">[</span><span class="token string">&#39;From&#39;</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&#39;Raspberry&#39;</span>
msg<span class="token punctuation">[</span><span class="token string">&#39;To&#39;</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&#39;desticion&#39;</span>
msg<span class="token punctuation">[</span><span class="token string">&#39;Subject&#39;</span><span class="token punctuation">]</span><span class="token operator">=</span>Header<span class="token punctuation">(</span><span class="token string">&#39;Ip Address Report&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;utf-8&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#sender email address, replace with your sender email</span>
from_add<span class="token operator">=</span><span class="token string">&#39;xxxxxx@163.com&#39;</span> 
<span class="token comment">#receiver email address, replace with your receiver email</span>
to_add<span class="token operator">=</span><span class="token string">&#39;yyyyyy@qq.com&#39;</span>
<span class="token comment">#pwd of sender email, if return 550 error code ,please use authorization code</span>
password<span class="token operator">=</span><span class="token string">&#39;zzzzzzzzzzzzzzz&#39;</span>
<span class="token comment">#smtp of sender email</span>
smtp_sever<span class="token operator">=</span><span class="token string">&#39;smtp.163.com&#39;</span>
sever<span class="token operator">=</span>smtplib<span class="token punctuation">.</span>SMTP<span class="token punctuation">(</span>smtp_sever<span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">)</span>
sever<span class="token punctuation">.</span>set_debuglevel<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
sever<span class="token punctuation">.</span>login<span class="token punctuation">(</span>from_add<span class="token punctuation">,</span>password<span class="token punctuation">)</span>
sever<span class="token punctuation">.</span>sendmail<span class="token punctuation">(</span>from_add<span class="token punctuation">,</span><span class="token punctuation">[</span>to_add<span class="token punctuation">]</span><span class="token punctuation">,</span>msg<span class="token punctuation">.</span>as_string<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
sever<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-\u8BBE\u7F6E\u5F00\u673A\u6267\u884C" tabindex="-1"><a class="header-anchor" href="#_3-\u8BBE\u7F6E\u5F00\u673A\u6267\u884C" aria-hidden="true">#</a> 3. \u8BBE\u7F6E\u5F00\u673A\u6267\u884C</h3><p>\u7F16\u8F91rc.local\u6587\u4EF6</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">vim</span> /etc/rc.local
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5C06\u4E0B\u9762\u547D\u4EE4\u6DFB\u52A0\u5230rc.local\u6587\u4EF6\u4E2D</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh -e</span>
<span class="token comment">#</span>
<span class="token comment"># rc.local</span>
<span class="token comment">#</span>
<span class="token comment"># This script is executed at the end of each multiuser runlevel.</span>
<span class="token comment"># Make sure that the script will &quot;exit 0&quot; on success or any other</span>
<span class="token comment"># value on error.</span>
<span class="token comment">#</span>
<span class="token comment"># In order to enable or disable this script just change the execution</span>
<span class="token comment"># bits.</span>
<span class="token comment">#</span>
<span class="token comment"># By default this script does nothing.</span>

python /home/leslie/send_email_when_power_on.py

<span class="token builtin class-name">exit</span> <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8BBE\u7F6E\u6267\u884C\u6743\u9650</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">chmod</span> +x /etc/rc.local
<span class="token function">sudo</span> systemctl daemon-reload
<span class="token function">sudo</span> systemctl list-dependencies multi-user.target <span class="token operator">|</span> <span class="token function">grep</span> rc-local
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u5982\u4E0B\u5185\u5BB9\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>\u25CF \u251C\u2500rc-local.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_4-reboot-\u68C0\u67E5\u662F\u5426\u53D1\u9001\u6210\u529F" tabindex="-1"><a class="header-anchor" href="#_4-reboot-\u68C0\u67E5\u662F\u5426\u53D1\u9001\u6210\u529F" aria-hidden="true">#</a> 4. reboot \u68C0\u67E5\u662F\u5426\u53D1\u9001\u6210\u529F</h3><h2 id="\u4E09\u3001vnc\u5B9E\u73B0mac\u8FDC\u7A0B\u8FDE\u63A5ubuntu" tabindex="-1"><a class="header-anchor" href="#\u4E09\u3001vnc\u5B9E\u73B0mac\u8FDC\u7A0B\u8FDE\u63A5ubuntu" aria-hidden="true">#</a> \u4E09\u3001VNC\u5B9E\u73B0Mac\u8FDC\u7A0B\u8FDE\u63A5Ubuntu</h2>`,24),d={href:"https://zhuanlan.zhihu.com/p/357334969",target:"_blank",rel:"noopener noreferrer"};function u(m,v){const s=c("ExternalLinkIcon");return e(),t("div",null,[r,n("p",null,[n("a",d,[i("\u53C2\u8003\u94FE\u63A5\uFF0C\u70B9\u51FB\u67E5\u770B"),o(s)])])])}const h=a(l,[["render",u],["__file","\u5F00\u673A\u81EA\u52A8\u53D1\u9001\u90AE\u4EF6.html.vue"]]);export{h as default};
