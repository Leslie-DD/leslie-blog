import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,o as e,a}from"./app-BFz2Hlpj.js";const l={},t=a(`<h1 id="安装mysql8" tabindex="-1"><a class="header-anchor" href="#安装mysql8"><span>安装MySQL8</span></a></h1><h2 id="一、ubuntu-18-04" tabindex="-1"><a class="header-anchor" href="#一、ubuntu-18-04"><span>一、Ubuntu 18.04</span></a></h2><h3 id="_1-下载deb包" tabindex="-1"><a class="header-anchor" href="#_1-下载deb包"><span>1. 下载deb包</span></a></h3><p>(1) 登入 mysql 官网，在官网中下载 deb 包，点击该链接，即可下载。<br><a href="https://dev.mysql.com/downloads/repo/apt/" target="_blank" rel="noopener noreferrer">下载deb包</a></p><p>(2) 下载该 deb 文件后，FTP上传到对应文件夹后 进入该文件夹，执行：<code>sudo dpkg -i 该deb文件名</code></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dpkg</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> mysql-apt-config_0.8.13-1_all.deb</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="3"><li>方向键选mysql-8.0 并按enter键<br> 再次方向键选择mysql-8.0 并按enter键<br> 方向键选择ok 并按enter键</li></ol><h3 id="_2-更新apt源" tabindex="-1"><a class="header-anchor" href="#_2-更新apt源"><span>2. 更新apt源</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> update</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_3-正式安装mysql-8-0" tabindex="-1"><a class="header-anchor" href="#_3-正式安装mysql-8-0"><span>3. 正式安装MySQL 8.0</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> mysql-server</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>安装完后，会出现一个图形界面，会让你设置root密码，输入后按enter键，并再次确认。</p><p>MySQL8.0 采用了新的加密方式，与 Ubuntu18.04 有兼容问题，故选择下面的旧版本5.x的加密方式。</p><h3 id="_4-登录mysql-查看当前的用户" tabindex="-1"><a class="header-anchor" href="#_4-登录mysql-查看当前的用户"><span>4. 登录MySQL，查看当前的用户</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>mysql -u root -p密码</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">use</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> mysql</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> host,</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> user, authentication_string, plugin from user;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_5-设置远程连接并修改-root-用户名为-remote-leslie-修改密码" tabindex="-1"><a class="header-anchor" href="#_5-设置远程连接并修改-root-用户名为-remote-leslie-修改密码"><span>5. 设置远程连接并修改 root 用户名为 remote-leslie，修改密码</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>update user set host = &#39;%&#39; where user =&#39;root&#39;;</span></span>
<span class="line"><span>update user set user = &#39;remote-leslie&#39; where user = &#39;root&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>修改密码，注意密码格式，mysql8.0以上密码策略限制必须要大小写加数字特殊符号</span></span>
<span class="line"><span></span></span>
<span class="line"><span>alter user&#39;remote-leslie&#39;@&#39;%&#39; IDENTIFIED BY &#39;KJHKdfsdf@98798&#39;;</span></span>
<span class="line"><span>flush privileges;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-创建数据库-testdatabase" tabindex="-1"><a class="header-anchor" href="#_6-创建数据库-testdatabase"><span>6. 创建数据库 testdatabase</span></a></h3><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">create</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> database</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> testdatabase</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_7-创建新用户-testuser" tabindex="-1"><a class="header-anchor" href="#_7-创建新用户-testuser"><span>7. 创建新用户 testuser</span></a></h3><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">CREATE</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> USER</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;testuser&#39;@&#39;%&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> IDENTIFIED</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> BY</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;testuser-password&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_8-授予用户-testuser-在-testdatabase-数据库-所有权限" tabindex="-1"><a class="header-anchor" href="#_8-授予用户-testuser-在-testdatabase-数据库-所有权限"><span>8. 授予用户 testuser 在 testdatabase 数据库 所有权限</span></a></h3><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">grant</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> all</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> privileges</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> testdatabase.</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> testuser@&#39;%&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">flush</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> privileges</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><br><h2 id="导出-导入数据库" tabindex="-1"><a class="header-anchor" href="#导出-导入数据库"><span>导出/导入数据库</span></a></h2><h3 id="_1-导出整个数据库" tabindex="-1"><a class="header-anchor" href="#_1-导出整个数据库"><span>1. 导出整个数据库</span></a></h3><p>mysqldump -u用户名 -p密码 数据库名 &gt; 导出的文件名</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>mysqldump -uroot -pmysql sva_rec &gt; ~/wcnc_db.sql</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-导出一个表-包括表结构和数据" tabindex="-1"><a class="header-anchor" href="#_2-导出一个表-包括表结构和数据"><span>2. 导出一个表，包括表结构和数据</span></a></h3><p>mysqldump -u用户名 -p 密码 数据库名 表名&gt; 导出的文件名</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span> mysqldump -uroot -pmysql sva_rec date_rec_drv&gt; ~/wcnc_db.sql</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_3-导出一个数据库结构" tabindex="-1"><a class="header-anchor" href="#_3-导出一个数据库结构"><span>3. 导出一个数据库结构</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>mysqldump -uroot -pmysql -d sva_rec &gt; ~/wcnc_db.sql</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_4-导出一个表-只有表结构" tabindex="-1"><a class="header-anchor" href="#_4-导出一个表-只有表结构"><span>4. 导出一个表，只有表结构</span></a></h3><p>mysqldump -u用户名 -p 密码 -d数据库名 表名&gt; 导出的文件名</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>mysqldump -uroot -pmysql -d sva_rec date_rec_drv&gt; ~/wcnc_db.sql</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_5-导入数据库" tabindex="-1"><a class="header-anchor" href="#_5-导入数据库"><span>5. 导入数据库</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>mysql -u root -p</span></span>
<span class="line"><span>mysql&gt;use 数据库</span></span>
<span class="line"><span>mysql&gt;source ~/wcnc_db.sql</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="二、centos-8" tabindex="-1"><a class="header-anchor" href="#二、centos-8"><span>二、CentOS 8</span></a></h2><p>转载自<a href="https://www.cnblogs.com/kasnti/p/11929030.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/kasnti/p/11929030.html</a></p><h3 id="使用最新的包管理器安装mysql" tabindex="-1"><a class="header-anchor" href="#使用最新的包管理器安装mysql"><span>使用最新的包管理器安装MySQL</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dnf</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> @mysql</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="启动服务" tabindex="-1"><a class="header-anchor" href="#启动服务"><span>启动服务</span></a></h3><p>安装完成后，运行以下命令来启动MySQL服务并使它在启动时自动启动：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> enable</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --now</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> mysqld</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>要检查MySQL服务器是否正在运行，请输入：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> mysqld</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="添加密码及安全设置" tabindex="-1"><a class="header-anchor" href="#添加密码及安全设置"><span>添加密码及安全设置</span></a></h3><p>运行mysql_secure_installation脚本，该脚本执行一些与安全性相关的操作并设置MySQL根密码：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> mysql_secure_installation</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>步骤如下：</p><ol><li><p>要求你配置VALIDATE PASSWORD component（验证密码组件）： 输入y ，回车进入该配置</p><p>选择密码验证策略等级， 我这里选择0 （low），回车<br> 输入新密码两次<br> 确认是否继续使用提供的密码？输入y ，回车<br> 移除匿名用户？ 输入y ，回车<br> 不允许root远程登陆？ 我这里需要远程登陆，所以输入n ，回车</p></li><li><p>移除test数据库？ 输入y ，回车</p></li><li><p>重新载入权限表？ 输入y ，回车</p></li></ol><h3 id="配置远程登陆" tabindex="-1"><a class="header-anchor" href="#配置远程登陆"><span>配置远程登陆</span></a></h3><p>如果需要设置root账户远程登陆，上一步骤中，不允许root远程登陆？这一步需要设为n。<br> 接下来本机登录MySQL，将root用户的host字段设为&#39;%&#39;，意为接受root所有IP地址的登录请求：<br> 本机登录MySQL:</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -uroot</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">上面步骤中设置的密码</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>回车后即可登录，接下来终端变成了 <code>mysql&gt;</code> 开头</p><p>接着继续执行mysql语句，将将root用户的host字段设为&#39;%&#39;：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">use</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> mysql</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">update</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> user</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> host=&#39;%&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> where</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> user=&#39;root&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">flush</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> privileges</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>设置完成后输入exit退出mysql，回到终端shell界面，接着开启系统防火墙的3306端口：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --add-port=3306/tcp</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --permanent</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --reload</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="关闭mysql主机查询dns" tabindex="-1"><a class="header-anchor" href="#关闭mysql主机查询dns"><span>关闭MySQL主机查询dns</span></a></h3><p>MySQL会反向解析远程连接地址的dns记录，如果MySQL主机无法连接外网，则dns可能无法解析成功，导致第一次连接MySQL速度很慢，所以在配置中可以关闭该功能。<br> 参考文档<br> 打开/etc/my.cnf文件，添加以下配置：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[mysqld]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">skip-name-resolve</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="重启服务" tabindex="-1"><a class="header-anchor" href="#重启服务"><span>重启服务</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> mysqld</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>本机测试安装后，MySQL8.0默认已经是utf8mb4字符集，所以字符集不再修改</p><h3 id="新建用户时密码过于简单提示错误" tabindex="-1"><a class="header-anchor" href="#新建用户时密码过于简单提示错误"><span>新建用户时密码过于简单提示错误</span></a></h3><p>ERROR 1819 (HY000): Your password does not satisfy the current policy requirements<br> 登录MySQL</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">SHOW</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> VARIABLES</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> LIKE</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;validate_password%&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>修改密码策略</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">set</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> global</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> validate_password_policy=LOW</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>修改密码最小长度</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> global</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> validate_password_length=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>修改密码</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">ALTER</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> USER</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;root&#39;@&#39;localhost&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> IDENTIFIED</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> BY</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;123456&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,77),n=[t];function h(d,r){return e(),i("div",null,n)}const c=s(l,[["render",h],["__file","安装MySQL8.html.vue"]]),g=JSON.parse('{"path":"/tutorial/linux/%E5%AE%89%E8%A3%85MySQL8.html","title":"安装MySQL8","lang":"zh-CN","frontmatter":{"tag":["MySQL","Linux","Ubuntu","Server"],"editLink":false,"comment":false,"description":"安装MySQL8 一、Ubuntu 18.04 1. 下载deb包 (1) 登入 mysql 官网，在官网中下载 deb 包，点击该链接，即可下载。 下载deb包 (2) 下载该 deb 文件后，FTP上传到对应文件夹后 进入该文件夹，执行：sudo dpkg -i 该deb文件名 方向键选mysql-8.0 并按enter键 再次方向键选择mysql...","head":[["meta",{"property":"og:url","content":"https://leslie-dd.github.io/leslie-blog/leslie-blog/tutorial/linux/%E5%AE%89%E8%A3%85MySQL8.html"}],["meta",{"property":"og:site_name","content":"Leslie的博客"}],["meta",{"property":"og:title","content":"安装MySQL8"}],["meta",{"property":"og:description","content":"安装MySQL8 一、Ubuntu 18.04 1. 下载deb包 (1) 登入 mysql 官网，在官网中下载 deb 包，点击该链接，即可下载。 下载deb包 (2) 下载该 deb 文件后，FTP上传到对应文件夹后 进入该文件夹，执行：sudo dpkg -i 该deb文件名 方向键选mysql-8.0 并按enter键 再次方向键选择mysql..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-04-17T18:21:17.000Z"}],["meta",{"property":"article:author","content":"DYF"}],["meta",{"property":"article:tag","content":"MySQL"}],["meta",{"property":"article:tag","content":"Linux"}],["meta",{"property":"article:tag","content":"Ubuntu"}],["meta",{"property":"article:tag","content":"Server"}],["meta",{"property":"article:modified_time","content":"2024-04-17T18:21:17.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"安装MySQL8\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-04-17T18:21:17.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"DYF\\",\\"url\\":\\"https://mrhope.site\\"}]}"]]},"headers":[{"level":2,"title":"一、Ubuntu 18.04","slug":"一、ubuntu-18-04","link":"#一、ubuntu-18-04","children":[{"level":3,"title":"1. 下载deb包","slug":"_1-下载deb包","link":"#_1-下载deb包","children":[]},{"level":3,"title":"2. 更新apt源","slug":"_2-更新apt源","link":"#_2-更新apt源","children":[]},{"level":3,"title":"3. 正式安装MySQL 8.0","slug":"_3-正式安装mysql-8-0","link":"#_3-正式安装mysql-8-0","children":[]},{"level":3,"title":"4. 登录MySQL，查看当前的用户","slug":"_4-登录mysql-查看当前的用户","link":"#_4-登录mysql-查看当前的用户","children":[]},{"level":3,"title":"5. 设置远程连接并修改 root 用户名为 remote-leslie，修改密码","slug":"_5-设置远程连接并修改-root-用户名为-remote-leslie-修改密码","link":"#_5-设置远程连接并修改-root-用户名为-remote-leslie-修改密码","children":[]},{"level":3,"title":"6. 创建数据库 testdatabase","slug":"_6-创建数据库-testdatabase","link":"#_6-创建数据库-testdatabase","children":[]},{"level":3,"title":"7. 创建新用户 testuser","slug":"_7-创建新用户-testuser","link":"#_7-创建新用户-testuser","children":[]},{"level":3,"title":"8. 授予用户 testuser 在 testdatabase 数据库 所有权限","slug":"_8-授予用户-testuser-在-testdatabase-数据库-所有权限","link":"#_8-授予用户-testuser-在-testdatabase-数据库-所有权限","children":[]}]},{"level":2,"title":"导出/导入数据库","slug":"导出-导入数据库","link":"#导出-导入数据库","children":[{"level":3,"title":"1. 导出整个数据库","slug":"_1-导出整个数据库","link":"#_1-导出整个数据库","children":[]},{"level":3,"title":"2. 导出一个表，包括表结构和数据","slug":"_2-导出一个表-包括表结构和数据","link":"#_2-导出一个表-包括表结构和数据","children":[]},{"level":3,"title":"3. 导出一个数据库结构","slug":"_3-导出一个数据库结构","link":"#_3-导出一个数据库结构","children":[]},{"level":3,"title":"4. 导出一个表，只有表结构","slug":"_4-导出一个表-只有表结构","link":"#_4-导出一个表-只有表结构","children":[]},{"level":3,"title":"5. 导入数据库","slug":"_5-导入数据库","link":"#_5-导入数据库","children":[]}]},{"level":2,"title":"二、CentOS 8","slug":"二、centos-8","link":"#二、centos-8","children":[{"level":3,"title":"使用最新的包管理器安装MySQL","slug":"使用最新的包管理器安装mysql","link":"#使用最新的包管理器安装mysql","children":[]},{"level":3,"title":"启动服务","slug":"启动服务","link":"#启动服务","children":[]},{"level":3,"title":"添加密码及安全设置","slug":"添加密码及安全设置","link":"#添加密码及安全设置","children":[]},{"level":3,"title":"配置远程登陆","slug":"配置远程登陆","link":"#配置远程登陆","children":[]},{"level":3,"title":"关闭MySQL主机查询dns","slug":"关闭mysql主机查询dns","link":"#关闭mysql主机查询dns","children":[]},{"level":3,"title":"重启服务","slug":"重启服务","link":"#重启服务","children":[]},{"level":3,"title":"新建用户时密码过于简单提示错误","slug":"新建用户时密码过于简单提示错误","link":"#新建用户时密码过于简单提示错误","children":[]}]}],"git":{"createdTime":1664720147000,"updatedTime":1713378077000,"contributors":[{"name":"Leslie","email":"LeslieDYF@gmail.com","commits":1}]},"readingTime":{"minutes":3.88,"words":1165},"filePathRelative":"tutorial/linux/安装MySQL8.md","localizedDate":"2022年10月2日","excerpt":"\\n<h2>一、Ubuntu 18.04</h2>\\n<h3>1. 下载deb包</h3>\\n<p>(1) 登入 mysql 官网，在官网中下载 deb 包，点击该链接，即可下载。<br>\\n<a href=\\"https://dev.mysql.com/downloads/repo/apt/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">下载deb包</a></p>\\n<p>(2) 下载该 deb 文件后，FTP上传到对应文件夹后 进入该文件夹，执行：<code>sudo dpkg -i 该deb文件名</code></p>\\n<div class=\\"language-bash line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"bash\\" data-title=\\"bash\\" style=\\"--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes github-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">sudo</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> dpkg</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\"> -i</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> mysql-apt-config_0.8.13-1_all.deb</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{c as comp,g as data};
